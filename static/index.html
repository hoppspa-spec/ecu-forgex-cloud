<!DOCTYPE html>
<html lang="es">
<head>
<link rel="stylesheet" href="/static/css/efx.css">
<script src="/static/js/theme.js"></script>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ECU FORGE X ‚Äî Generar BIN.MOD</title>
<link rel="preconnect" href="https://www.hopp.cl" />
<style>
  :root{
    --bg:#ffffff; --ink:#2b2f38; --muted:#6b7280;
    --stroke:#2f3a4a; --accent:#0b5ed7; --accent-2:#0ea5e9;
    --card:#fff; --chip:#f6f7fb;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui, Segoe UI, Roboto, Arial}
  header{display:flex;align-items:center;gap:12px;padding:12px 16px;border-bottom:2px solid var(--stroke);background:#fafafa}
  header .brand{font-weight:800;font-size:18px;letter-spacing:.3px}
  .container{display:grid;grid-template-columns:360px 1fr 420px;gap:16px;padding:16px;max-width:1400px;margin:0 auto}
  .card{background:var(--card);border:2px solid #2f3a4a;border-radius:10px;padding:14px}
  h3{margin:0 0 8px;font-size:16px}
  label{font-size:13px;color:var(--muted);display:block;margin-top:6px}
  input,select,button{width:100%;padding:10px;border:2px solid #2f3a4a;border-radius:8px;background:#fff;color:var(--ink);font-size:14px}
  button.btn{background:var(--accent);color:#fff;font-weight:700;cursor:pointer}
  button.btn:disabled{opacity:.6;cursor:not-allowed}
  .list{display:flex;flex-direction:column;gap:8px}
  .patch{border:2px solid #2f3a4a;border-radius:10px;padding:10px;background:#fff}
  .patch .title{font-weight:700}
  .kv{margin-top:4px}
  .kv div{margin:2px 0}
  .yaml{margin-top:10px;background:#0a0f1d;color:#e9f0ff;border:2px solid #2f3a4a;border-radius:10px;padding:10px;max-height:320px;overflow:auto;font-family:ui-monospace,Menlo,Consolas,monospace;font-size:12px}
  .debug{display:none;margin-top:10px;background:#fff1; border:2px dashed #2f3a4a; padding:8px;border-radius:8px}
  small.muted{color:var(--muted)}
</style>
</head>
<body>
<header class="efx-topbar">
  <div class="efx-title">ECU FORGE X</div>

  <div class="efx-actions">
    <button class="btn" onclick="location.href='/static/login.html'">
      Iniciar sesi√≥n
    </button>

    <button class="btn" onclick="location.href='/static/register.html'">
      Registro
    </button>

    <button class="btn" onclick="EFX.toggleTheme()" title="Dark / Light">
      üåô / ‚òÄÔ∏è
    </button>
  </div>
</header>

<div class="container">
  <!-- IZQUIERDA: FORM -->
  <div class="card">
    <h3>üìÅ An√°lisis de BIN</h3>
    <label>Marca</label>
    <select id="selBrand"><option value="">‚Äî Selecciona ‚Äî</option></select>
    <label>Modelo</label>
    <select id="selModel" disabled><option value="">‚Äî Selecciona ‚Äî</option></select>
    <label>A√±o</label>
    <select id="selYear" disabled><option value="">‚Äî Selecciona ‚Äî</option></select>

    <label>Archivo BIN</label>
    <input id="binfile" type="file" />

    <div style="margin-top:10px">
      <button id="btnAnalizar" class="btn">Analizar BIN</button>
    </div>
    <div id="formNote" style="margin-top:8px"><small class="muted">Formatos: .bin, .mpc, .org, .e2p, .101</small></div>
  </div>

  <!-- CENTRO: ECU INFO -->
  <div class="card">
    <h3>‚öôÔ∏è ECU Info</h3>
    <div id="ecuInfo" class="kv">
      <div>Esperando an√°lisis‚Ä¶</div>
    </div>

    <div id="debugBox" class="debug">
      <strong>Offsets / Debug (s√≥lo admin)</strong>
      <div id="debugContent"><small class="muted">‚Äî</small></div>
    </div>
  </div>

  <!-- DERECHA: PARCHES + YAML -->
  <div class="card">
    <h3>üß© Parches Disponibles</h3>
    <div id="patchList" class="list">
      <div class="patch"><div class="title">No hay parches disponibles</div></div>
    </div>

    <h3 style="margin-top:12px">Resumen YAML</h3>
    <pre id="yamlBox" class="yaml"># A√∫n sin datos‚Ä¶</pre>
    <button id="btnCopyYaml" class="btn" style="margin-top:8px">Copiar YAML</button>
  </div>
</div>

<script src="/static/js/index.js"></script>
</body>
</html>
